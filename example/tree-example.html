<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="/dist/nflow-vis.css">
  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="/node_modules/d3/d3.js"></script>
  <script src="/node_modules/nflow/dist/nflow.js"></script>
  <script src="/dist/nflow-vis.js"></script>
  <style type="text/css">
    figure{
      height: 500px;
      width: 800px;
      display: inline-block;
      margin:4px;
      border: 1px dashed #334455;
    }

  </style>
</head>

<body id="home">

  <h1>nFlow-vis example</h1>
  
  <figure >
    <svg width=100% height=100% >
      <g width="800" height="300" class="tree"></g>
      class="example2"></g>
      <g width="800" height="200" transform="translate(0,300)"class="timeline"></g>
    </svg>
  </figure>
  
  <script type="text/javascript">(function(){
    
    nFlow.enableDevTools()
    var f = nFlow.create('f').parent(null)
    var vis = nFlowVis.Vis()
    
    
    vis.emit('track', f)
    
    var tree =  nFlowVis.Tree()
    tree.emit.downstream('dom', d3.select('.tree').node())
    tree.emit('show-events', false)
    tree.parent(vis)
      //.emit('allow-dragging', false)
      //.emit('type', 'cluster')
    
    // var dispatchers = nFlowVis.Tree()
    //   .name('dispatcher-tree')
    //   .parent(vis)

    var timeline = nFlowVis.Timeline()
      
    timeline.emit.downstream('dom', d3.select('.timeline').node())
    timeline.parent(vis)
    // dispatchers
    //   .emit.downstream('dom', d3.select('.example2').node())
    // dispatchers
    //   .emit.downstream('show-events', false)



    var a = f.create('a')
      .on('foo', function(){})
      .on('bar', function(){})
      .on('dog', function(){})
      .on('hello', function(){})

    f.create('beta')
    var c = f.create('c')

    c.create('x')
    var e = c.create('position-service')
      .on('bar', function(){ })
    
    e.create('foxtrot')
      .on('bar', function(){})

    var g = e.create('g')
    
    f.create('d')
      .on('hello', function(){})

    c.emit('hello').emit('bar').emit('dog')
    c.emit('hello').emit('bar')
    c.emit('hello').emit('bar')
    c.emit('hello').emit('bar')
    c.emit('hello').emit('bar')
      .call(f=>{
        //f.emit('cat')
        f.emit('dog')
      })
    c.emit('hello').emit('bar')
    c.emit('foo')
    g.emit('hello')
    g.emit('helo')

    g.cancel()
    setInterval(function(){
      f.emit('bar')
    },3500)
    
  }())</script>

</body>
</html>